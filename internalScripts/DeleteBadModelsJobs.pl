#!/usr/bin/perl -w

use strict;
use warnings;
use DBI;

my $badModels = [qw(
Seed1392.3.1436
Seed6666666.24.137
Seed6666666.339.30892
Seed6666666.339.39982
Seed3702.7.796
Seed6666666.416.11832
Seed6666666.417.11832
Seed6666666.567.28542
Seed381124.5.16242
Seed70447.3.796
Seed3702.7.16242
Seed3702.8.16242
Seed6666666.753.776
Seed6666666.829.28922
Seed6666666.829.42292
Seed6666666.831.53692
Seed6666666.832.53692
Seed6666666.833.53692
Seed6666666.831.6622
Seed6666666.835.54482
Seed6666666.835.15602
Seed83333.1.24902
Seed6666666.878.51592
Seed70448.3.51242
Seed511145.6.24902
Seed83333.1.45632
Seed224308.1.51242
Seed3702.9.45632
Seed39947.3.45632
Seed4558.3.45632
Seed6666666.158.58822
Seed220664.5.45632
Seed6666666.166.47812
Seed6666666.164.50582
Seed6666666.167.7052
Seed6666666.168.19782
Seed6666666.167.19782
Seed6666666.168.39022
Seed6666666.168.70982
Seed6666666.168.46652
Seed6666666.169.4132
Seed6666666.169.46652
Seed6666666.169.19782
Seed6666666.17.19782
Seed6666666.185.25212
Seed6666666.161.7872
Seed6666666.365.36232
Seed662.13.15872
Seed6666666.38.12512
Seed6666666.38.41722
Seed6666666.381.97412
Seed783.1.101982
Seed6666666.389.98832
Seed6666666.39.62742
Seed6666666.391.8942
Seed204722.1.101922
Seed6666666.189.68522
Seed6666666.191.20772
Seed83333.1.906
Seed6666666.194.37422
Seed198215.1.16242
Seed6666666.198.68522
Seed6666666.223.11652
Seed6666666.238.69542
Seed6666666.244.1379
Seed6666666.253.3312
Seed6666666.273.28922
Seed6666666.278.51762
Seed6666666.28.41522
Seed6666666.305.46442
Seed6666666.305.91802
Seed6666666.365.68702
Seed59201.4.41542
Seed59201.5.41542
Seed6666666.365.41442
Seed59201.7.41542
Seed6666666.365.93932
Seed6666666.365.46572
Seed6666666.365.96352
Seed1280.105.99332
Seed6666666.367.97352
Seed562.131.98782
Seed6666666.367.99182
Seed6666666.367.1141
Seed6666666.367.93932
Seed6666666.367.50432
Seed6666666.293.64252
Seed6666666.367.47812
Seed6666666.367.97412
Seed6666666.367.1388
Seed6666666.367.96862
Seed6666666.367.887
Seed6666666.367.99512
Seed6666666.367.98702
Seed6666666.367.99082
Seed6666666.136.25762
Seed6666666.372.97412
Seed6666666.372.68302
Seed6666666.372.10302
Seed6666666.372.751
Seed6666666.372.24662
Seed6666666.372.13282
Seed6666666.372.7052
Seed6666666.373.68302
Seed6666666.373.28022
Seed6666666.201.144
Seed6666666.373.53052
Seed6666666.373.44592
Seed287.32.24662
Seed6666666.374.82632
Seed6666666.374.47222
Seed6666666.375.13652
Seed6666666.375.36232
Seed6666666.375.100762
Seed6666666.375.39922
Seed6666666.375.68302
Seed6666666.375.100662
Seed413071.3.98872
Seed6666666.375.19782
Seed6666666.375.13822
Seed6666666.379.82632
Seed6666666.379.28922
Seed6666666.379.68172
Seed6666666.379.31002
Seed6666666.379.39942
Seed6666666.375.100312
Seed6666666.379.890
Seed6666666.379.100022
Seed6666666.379.101162
Seed6666666.379.19642
Seed6666666.375.89182
Seed6666666.38.40642
Seed6666666.38.101432
Seed6666666.38.53042
Seed6666666.38.53212
Seed6666666.38.101512
Seed6666666.38.68302
Seed6666666.38.101582
Seed6666666.38.101542
Seed6666666.381.101662
Seed6666666.381.41722
Seed6666666.381.101702
Seed562.136.66842
Seed6666666.381.97852
Seed6666666.381.98832
Seed6666666.381.15872
Seed6666666.381.3252
Seed6666666.381.101632
Seed6666666.372.100322
Seed6666666.381.101802
Seed6666666.383.101812
Seed6666666.383.101972
Seed6666666.383.20182
Seed6666666.383.98832
Seed6666666.383.36172
Seed6666666.383.101342
Seed6666666.383.68062
Seed6666666.384.68062
Seed6666666.384.68302
Seed6666666.386.68062
Seed6666666.386.102332
Seed6666666.386.41522
Seed6666666.386.98832
Seed6666666.386.11652
Seed6666666.386.1466
Seed6666666.386.102412
Seed6666666.386.101632
Seed6666666.387.68062
Seed6666666.387.102542
Seed6666666.388.15062
Seed6666666.388.101632
Seed6666666.389.15062
Seed6666666.389.39022
Seed6666666.39.751
Seed6666666.39.58422
Seed6666666.39.74832
Seed6666666.39.102772
Seed6666666.39.102882
Seed6666666.39.81872
Seed6666666.391.68062
Seed6666666.391.102872
Seed6666666.391.68302
Seed6666666.391.98832
Seed6666666.391.98472
Seed6666666.392.68062
Seed6666666.392.103002
Seed6666666.393.68062
Seed6666666.393.103062
Seed6666666.393.96292
Seed6666666.393.13282
Seed6666666.394.36232
Seed6666666.394.100352
Seed6666666.394.98472
Seed6666666.396.103572
Seed6666666.396.98472
Seed6666666.396.100352
Seed6666666.396.70742
Seed6666666.396.68062
Seed6666666.396.102732
Seed6666666.396.182
Seed6666666.396.98832
Seed6666666.386.8942
Seed6666666.386.101162
Seed6666666.835.52842
Seed6666666.245.7052
Seed6666666.39.68062
Seed6666666.389.102602
Seed562.14.24302
Seed6666666.389.102772
Seed6666666.39.97412
Seed6666666.391.94452
Seed6666666.393.8942
Seed6666666.393.102862
Seed6666666.394.100872
Seed6666666.396.103562
Seed6666666.396.751
Seed6666666.383.19782
Seed6666666.384.97412
Seed6666666.384.39972
Seed6666666.384.102112
Seed6666666.386.66612
Seed6666666.386.97412
Seed6666666.387.51932
Seed6666666.389.102722
Seed6666666.389.13652
Seed6666666.39.102172
Seed6666666.39.102332
Seed6666666.39.98472
Seed6666666.39.101632
Seed6666666.391.13652
Seed6666666.392.13652
Seed6666666.392.19782
Seed6666666.393.97412
Seed6666666.394.97412
Seed6666666.393.93672
Seed6666666.394.13652
Seed6666666.396.103542
Seed6666666.396.100492
Seed6666666.396.97412
Seed6666666.877.51592
Seed6666666.384.3742
Seed.27392
Seed.36182
Seed.38232
TestModel
Seed.38742
Seed.39762
Seed.38712
Seed.37942
Seed.41442
Seed.46522
Seed.19042
Seed.50152
322098.19
Seed.53002
Seed.51162
txt.2
Seed.70642
12.16242
Seed.84672
Seed.91742
Seed.40962
Seed.102072
)];

my $db = DBI->connect("DBI:mysql:ModelDB:bio-app-authdb.mcs.anl.gov:3306","webappuser");
for (my $i=0; $i < @{$badModels}; $i++) {
	my $model = $badModels->[$i];
	print "Deleting ".$model."!\n";
	my $statement = "DELETE FROM ModelDB.REACTION_MODEL WHERE MODEL = '".$model."';";
	$db->do($statement);
	$statement = "DELETE FROM ModelDB.MODEL WHERE id = '".$model."';";
	$db->do($statement);
	if ($model =~ m/^Seed(\d+\.\d+)\./) {
		my $genome = $1;
		$statement = "DELETE FROM ModelDB.GENOMESTATS WHERE GENOME = '".$genome."';";
		$db->do($statement);	
	}
}

1;
